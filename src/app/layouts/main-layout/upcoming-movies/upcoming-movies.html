<section class="upcoming-section">
  <h2 class="section-title">Upcoming Movies</h2>

  @if (movies$ | async; as movies) { @if (cardWidth$ | async; as cardWidth) {
  <div class="slider-wrapper">
    <button mat-icon-button class="nav prev" (click)="scroll('prev', cardWidth)">
      <mat-icon>chevron_left</mat-icon>
    </button>

    <div class="slider" #slider>
      @for (movie of movies; track movie.id) {
      <app-movie-card variant="compact" [movie]="{
          id: movie.id,
          title: movie.title,
          poster_path: movie.poster_path,
          release_date: movie.release_date,
          inWatchlist: (watchListService.isMovieInWatchlist(movie.id) | async) ?? false
        }" [posterUrl]="movie.poster_path" [showFavorite]="(isAuth$ | async) ?? false"
        (favorite)="toggleFavorite(movie)">
      </app-movie-card>
      }
    </div>

    <button mat-icon-button class="nav next" (click)="scroll('next', cardWidth)">
      <mat-icon>chevron_right</mat-icon>
    </button>
  </div>
  } }
</section>
