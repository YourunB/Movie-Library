<section class="now-playing-section">
  <div class="section-wrapper">
    <h2 class="section-title">ðŸŽŸ Now Playing in Theaters</h2>

    <div class="slider-wrapper">
      @if (movies$ | async; as movies) { @if (cardWidth$ | async; as cardWidth)
      {
      <button
        mat-icon-button
        class="nav prev"
        (click)="scroll('prev', cardWidth)"
      >
        <mat-icon>chevron_left</mat-icon>
      </button>

      <div class="slider" #slider>
        @for (movie of movies; track movie.id) {
        <a [routerLink]="['/movie', movie.id]" class="movie-link">
          <mat-card class="movie-card">
            <img mat-card-image [src]="movie.poster_path" [alt]="movie.title" />
            <mat-card-content class="content">
              @if(isAuth$ | async) {
              <mat-icon
                [ngClass]="{
                  'in-watchlist':
                    watchListService.isMovieInWatchlist(movie.id) | async
                }"
                class="favorite-icon"
                (click)="toggleFavorite($event, movie)"
                >favorite</mat-icon
              >
              }
              <h3 class="title">{{ movie.title }}</h3>
              <p class="release">{{ movie.release_date | date : "longDate" }}</p>
            </mat-card-content>
          </mat-card>
        </a>
        }
      </div>

      <button
        mat-icon-button
        class="nav next"
        (click)="scroll('next', cardWidth)"
      >
        <mat-icon>chevron_right</mat-icon>
      </button>
      } }
    </div>
  </div>
</section>
